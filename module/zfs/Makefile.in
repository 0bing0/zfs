DISTFILES  = arc.o bplist.o dbuf.o dmu.o dmu_object.o dmu_objset.o
DISTFILES += dmu_traverse.o dmu_tx.o dmu_zfetch.o dnode.o dnode_sync.o
DISTFILES += dsl_dataset.o dsl_deleg.o dsl_dir.o dsl_pool.o dsl_prop.o
DISTFILES += dsl_synctask.o dsl_scrub.o fletcher.o gzip.o lzjb.o metaslab.o
DISTFILES += refcount.o sha256.o spa.o spa_boot.o spa_config.o spa_errlog.o
DISTFILES += spa_history.o spa_misc.o space_map.o txg.o uberblock.o
DISTFILES += unique.o vdev.o vdev_cache.o vdev_disk.o vdev_missing.o
DISTFILES += vdev_file.o vdev_label.o vdev_mirror.o vdev_queue.o vdev_raidz.o
DISTFILES += vdev_root.o zap.o zap_leaf.o zap_micro.o zfs_byteswap.o zfs_fm.o
DISTFILES += zfs_znode.o zil.o zio.o zio_checksum.o zio_compress.o zio_inject.o

MODULE := zpool

EXTRA_CFLAGS  = @KERNELCPPFLAGS@
EXTRA_CFLAGS += -I@MODDIR@/zfs/include
EXTRA_CFLAGS += -I@MODDIR@/zcommon/include
EXTRA_CFLAGS += -I@MODDIR@/avl/include
EXTRA_CFLAGS += -I@MODDIR@/nvpair/include

obj-m := ${MODULE}.o

${MODULE}-objs += arc.o
${MODULE}-objs += bplist.o
${MODULE}-objs += dbuf.o
${MODULE}-objs += dmu.o
${MODULE}-objs += dmu_object.o
${MODULE}-objs += dmu_objset.o
${MODULE}-objs += dmu_send.o
${MODULE}-objs += dmu_traverse.o
${MODULE}-objs += dmu_tx.o
${MODULE}-objs += dmu_zfetch.o
${MODULE}-objs += dnode.o
${MODULE}-objs += dnode_sync.o
${MODULE}-objs += dsl_dataset.o
${MODULE}-objs += dsl_deleg.o
${MODULE}-objs += dsl_dir.o
${MODULE}-objs += dsl_pool.o
${MODULE}-objs += dsl_prop.o
${MODULE}-objs += dsl_scrub.o
${MODULE}-objs += dsl_synctask.o
${MODULE}-objs += fletcher.o
${MODULE}-objs += gzip.o
${MODULE}-objs += lzjb.o
${MODULE}-objs += metaslab.o
${MODULE}-objs += refcount.o
${MODULE}-objs += rrwlock.o
${MODULE}-objs += sha256.o
${MODULE}-objs += spa.o
${MODULE}-objs += spa_boot.o
${MODULE}-objs += spa_config.o
${MODULE}-objs += spa_errlog.o
${MODULE}-objs += spa_history.o
${MODULE}-objs += spa_misc.o
${MODULE}-objs += space_map.o
${MODULE}-objs += txg.o
${MODULE}-objs += uberblock.o
${MODULE}-objs += unique.o
${MODULE}-objs += vdev.o
${MODULE}-objs += vdev_cache.o
${MODULE}-objs += vdev_file.o
${MODULE}-objs += vdev_label.o
${MODULE}-objs += vdev_mirror.o
${MODULE}-objs += vdev_missing.o
${MODULE}-objs += vdev_queue.o
${MODULE}-objs += vdev_raidz.o
${MODULE}-objs += vdev_root.o
${MODULE}-objs += zap.o
${MODULE}-objs += zap_leaf.o
${MODULE}-objs += zap_micro.o
${MODULE}-objs += zfs_acl.o
# ${MODULE}-objs += zfs_byteswap.o
# ${MODULE}-objs += zfs_ctldir.o
# ${MODULE}-objs += zfs_dir.o
${MODULE}-objs += zfs_fm.o
${MODULE}-objs += zfs_fuid.o
# ${MODULE}-objs += zfs_ioctl.o
# ${MODULE}-objs += zfs_log.o
# ${MODULE}-objs += zfs_replay.o
# ${MODULE}-objs += zfs_rlock.o
# ${MODULE}-objs += zfs_vfsops.o
# ${MODULE}-objs += zfs_vnops.o
${MODULE}-objs += zfs_znode.o
${MODULE}-objs += zil.o
${MODULE}-objs += zio.o
${MODULE}-objs += zio_checksum.o
${MODULE}-objs += zio_compress.o
${MODULE}-objs += zio_inject.o
# ${MODULE}-objs += zvol.o
