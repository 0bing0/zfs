DISTFILES = Makefile.in zdb.c zdb_il.c

CMD := zdb

HOSTCFLAGS += @HOSTCFLAGS@
HOSTCFLAGS += -I@CMDDIR@/zdb/
HOSTCFLAGS += -I@LIBDIR@/libsolcompat/include
HOSTCFLAGS += -I@LIBDIR@/libport/include
HOSTCFLAGS += -I@LIBDIR@/libavl/include
HOSTCFLAGS += -I@LIBDIR@/libnvpair/include
HOSTCFLAGS += -I@LIBDIR@/libumem/include
HOSTCFLAGS += -I@LIBDIR@/libuutil/include
HOSTCFLAGS += -I@LIBDIR@/libzcommon/include
HOSTCFLAGS += -I@LIBDIR@/libzfs/include

HOSTLDFLAGS += -lavl -L@LIBDIR@/libavl
HOSTLDFLAGS += -lnvpair -L@LIBDIR@/libnvpair
HOSTLDFLAGS += -lumem -L@LIBDIR@/libumem
HOSTLDFLAGS += -luutil -L@LIBDIR@/libuutil
HOSTLDFLAGS += -lzport -L@LIBDIR@/libport
HOSTLDFLAGS += -lsolcompat -L@LIBDIR@/libsolcompat
HOSTLDFLAGS += -lzcommon -L@LIBDIR@/libzcommon
HOSTLDFLAGS += -lzfs -L@LIBDIR@/libzfs

# Additional shared library paths for executing binaries in-tree
export LD_RUN_PATH = @LIBDIR@/libavl:@LIBDIR@/libnvpair:@LIBDIR@/libumem:@LIBDIR@/libuutil:@LIBDIR@/libport:@LIBDIR@/libsolcompat:@LIBDIR@/libzcommon:@LIBDIR@/libzfs

hostprogs-y := ${CMD}
always := $(hostprogs-y)

${CMD}-objs += zdb_il.o
${CMD}-objs += zdb.o		# Core command
