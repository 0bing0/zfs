DISTFILES = Makefile.in zdump.c

CMD := zdump

HOSTCFLAGS += @HOSTCFLAGS@
HOSTCFLAGS += -I@CMDDIR@/zdump/
HOSTCFLAGS += -I@LIBDIR@/libspl/include
HOSTCFLAGS += -I@LIBDIR@/libavl/include
HOSTCFLAGS += -I@LIBDIR@/libnvpair/include
HOSTCFLAGS += -I@LIBDIR@/libuutil/include
HOSTCFLAGS += -I@LIBDIR@/libzcommon/include
HOSTCFLAGS += -I@LIBDIR@/libzfs/include

HOSTLDFLAGS += -lavl -L@LIBDIR@/libavl
HOSTLDFLAGS += -lnvpair -L@LIBDIR@/libnvpair
HOSTLDFLAGS += -luutil -L@LIBDIR@/libuutil
HOSTLDFLAGS += -lspl -L@LIBDIR@/libspl
HOSTLDFLAGS += -lzcommon -L@LIBDIR@/libzcommon
HOSTLDFLAGS += -lzfs -L@LIBDIR@/libzfs

# Additional shared library paths for executing binaries in-tree
export LD_RUN_PATH = @LIBDIR@/libavl:@LIBDIR@/libnvpair:@LIBDIR@/libuutil:@LIBDIR@/libspl:@LIBDIR@/libzcommon:@LIBDIR@/libzfs

hostprogs-y := ${CMD}
always := $(hostprogs-y)

${CMD}-objs += zdump.o		# Arg processing
